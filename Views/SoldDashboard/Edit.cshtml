@model PropertyInventorySystem.Models.SoldDashboardViewModel

<h2>Register Sold Property</h2>
<body>
    <div class="container">
  
<div class="row">
    <div class="col-md-8">
        <form id="editForm" asp-controller="SoldDashboard" asp-action="Edit" asp-route-propertyId="@Model.PropertyId" asp-route-contactId="@Model.ContactId" method="post">

    <div class="form-group">
        <label asp-for="AskingPriceEUR" class="control-label"></label>
        <input asp-for="AskingPriceEUR" class="form-control" />
        <span asp-validation-for="AskingPriceEUR" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Owner" class="control-label"></label>
                <input asp-for="Owner" class="form-control" />
        <span asp-validation-for="Owner" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="ContactNumber" class="control-label"></label>
        <input asp-for="ContactNumber" class="form-control" />
        <span asp-validation-for="ContactNumber" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Email" class="control-label"></label>
        <input asp-for="Email" class="form-control" type="email" />
        <span asp-validation-for="Email" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="DateOfPurchase" class="control-label"></label>
        <input asp-for="DateOfPurchase" class="form-control" type="date" />
        <span asp-validation-for="DateOfPurchase" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="EffectiveTill" class="control-label"></label>
        <input asp-for="EffectiveTill" class="form-control" type="date" />
        <span asp-validation-for="EffectiveTill" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="SoldAtPriceEUR" class="control-label"></label>
        <input asp-for="SoldAtPriceEUR" class="form-control" />
        <span asp-validation-for="SoldAtPriceEUR" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
        </form  >
         </div>
    </div>
</div>
        @section Scripts {
            <partial name="_ValidationScriptsPartial" />
        }
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</body>


<script>
    $(document).ready(function () {
        $('#editForm').submit(function (event) {
            event.preventDefault(); 
            var formData = $(this).serialize();
            $.ajax({
                type: 'POST',
                url: $(this).attr('action'), 
                data: formData,
                success: function (response) {
                    alert('Register succesfully');
                    console.log('Form submitted successfully');         // Debug          
                    window.location.href = '@Url.Action("Dashboard", "Home")';
                },
                error: function (xhr, status, error) {
                   
                    console.error('Form submission failed:', error);   // Debug
                }
            });
        });
    });    
   
</script>